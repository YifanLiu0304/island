{{ $page := . }}

<div class="card-simple">
  {{ $resource := ($page.Resources.ByType "image").GetMatch "*featured*" }}
  {{ $anchor := $page.Params.image.focal_point | default "Smart" }}

  {{ with $resource }}
  {{ $image := .Fill (printf "808x455 q90 %s" $anchor) }}
  <div>
    <a href="{{ $page.RelPermalink }}">
      <img src="{{ $image.RelPermalink }}" class="article-banner" alt="{{ $page.Title }}">
    </a>
  </div>
  {{end}}

  <div class="article-title">
    <h2><a href="{{ $page.RelPermalink }}">{{ $page.Title }}</a></h2>
  </div>

  <div class="article-style">
    {{ $page.Params.publication | markdownify }}
  </div>

  <div class="article-metadata">
    {{ $date := $page.Date.Format "Jan 2, 2006" }}
    {{ $date }}
  </div>

  <div class="article-actions">
    {{ if $page.Params.abstract }}
    <button class="btn btn-outline-primary btn-sm" onclick="toggleAbstract('abstract-{{ $page.File.UniqueID }}')">
      <i class="fas fa-file-alt"></i> Abstract
    </button>
    {{ end }}
    <a href="mailto:yifan.liu@gatech.edu?subject=Regarding: {{ $page.Title }}" class="btn btn-outline-primary btn-sm">
      <i class="fas fa-envelope"></i> Details (email me)
    </a>
  </div>

  {{ if $page.Params.abstract }}
  <div id="abstract-{{ $page.File.UniqueID }}" class="abstract-content" style="display: none;">
    {{ $page.Params.abstract | markdownify }}
  </div>
  {{ end }}
</div>

<style>
.abstract-content {
  margin-top: 1rem;
  padding: 1rem;
  background-color: #f8f9fa;
  border-radius: 4px;
}
</style>

<script>
function toggleAbstract(id) {
  var x = document.getElementById(id);
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}
</script> 