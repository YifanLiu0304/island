{{/* Citation view */}}

{{ $item := .item }}

<div class="pub-list-item view-citation" style="margin-bottom: 1rem">
  {{/* Author */}}
  {{ $authorLen := len $item.Params.authors }}
  {{ if gt $authorLen 0 }}
    {{ range $index, $author := $item.Params.authors }}
      {{- if eq $author "Yifan Liu" -}}
        <strong>{{ $author }}</strong>
      {{- else -}}
        {{ $author }}
      {{- end -}}
      {{- if lt $index (sub $authorLen 1) -}}, {{ end -}}
    {{ end -}}.
  {{ end }}

  {{/* Paper Title with DOI link */}}
  {{ if $item.Params.url_pdf }}
    <a href="{{ $item.Params.url_pdf }}" target="_blank" style="text-decoration: underline;">{{ $item.Title }}</a>.
  {{ else }}
    <u>{{ $item.Title }}</u>.
  {{ end }}

  {{/* Journal/Event details - only show if they exist */}}
  {{ if $item.Params.publication }}
    <em>{{ $item.Params.publication | markdownify }}</em>,
  {{ else if $item.Params.event }}
    {{ with $item.Params.event_url }}<a href="{{ . }}" target="_blank">{{ end }}
    {{ $item.Params.event | markdownify }}
    {{ if $item.Params.event_url }}</a>{{ end }},
  {{ end }}
  {{ if $item.Params.publishDate }}
    {{ dateFormat "2006" $item.Params.publishDate }}
  {{ end }}

  {{/* Buttons */}}
  <div style="margin-top: 0.5rem;">
    <button onclick="toggleAbstract(this)" class="btn btn-sm" style="background-color: white; color: #81c784; border: 1px solid #81c784; margin-right: 0.5rem;">
      Abstract
    </button>
    <a href="mailto:liuyifan@gatech.edu" class="btn btn-sm" style="background-color: white; color: #81c784; border: 1px solid #81c784;">
      Email me for details
    </a>
    <div id="abstract-content" style="display: none; margin-top: 0.5rem; padding: 1rem; background-color: #f5f5f5; border-radius: 4px;">
      {{ $item.Params.abstract }}
    </div>
  </div>

  <script>
    function toggleAbstract(button) {
      const content = button.parentElement.querySelector('#abstract-content');
      if (content.style.display === 'none') {
        content.style.display = 'block';
      } else {
        content.style.display = 'none';
      }
    }
  </script>
</div> 