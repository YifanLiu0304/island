{{ $item := . }}

<div class="pub-list-item view-citation" style="margin-bottom: 2rem">
  <div class="pub-list-item" style="margin-bottom: 1rem; font-size: 0.9rem;">
    <span class="article-metadata li-cite-author" style="color: rgb(76, 76, 76);">
      {{ range $index, $value := .Params.authors }}
        {{- if eq $index 0 }}
          {{ $value | markdownify }}
        {{- else }}
          {{- if eq $index (sub (len $.Params.authors) 1) }}, & {{ $value | markdownify }}
          {{- else }}, {{ $value | markdownify }}
          {{- end }}
        {{- end }}
      {{- end }}
    </span>
    <span class="article-metadata" style="color: rgb(76, 76, 76);">({{ $item.Date.Format "2006" }}). </span>
    {{ if $item.Params.links.url }}
      <a href="{{ $item.Params.links.url }}" class="article-title" style="color: rgb(76, 76, 76); text-decoration: none; font-weight: 500;">{{ $item.Title }}</a>.
    {{ else }}
      <span class="article-title" style="color: rgb(76, 76, 76); font-weight: 500;">{{ $item.Title }}</span>.
    {{ end }}
    {{ with $item.Params.publication }}
      <span class="article-metadata" style="color: rgb(76, 76, 76);">{{ . | markdownify }}</span>
    {{ end }}
  </div>

  <div class="btn-links">
    <button class="btn btn-outline-primary btn-sm" onclick="toggleAbstract('abstract-{{ $item.File.UniqueID }}')" style="border-color: #81c784; color: #2e7d4f;">
      Abstract
    </button>
    <a class="btn btn-outline-primary btn-sm" href="mailto:liuyifan@gatech.edu" style="border-color: #81c784; color: #2e7d4f;">
      Email me for details
    </a>
    {{ with $item.Params.links }}
      {{ range $key, $value := . }}
        {{ if eq $key "doi" }}
          <a class="btn btn-outline-primary btn-sm" href="{{ $value }}" target="_blank" style="border-color: #81c784; color: #2e7d4f;">
            DOI
          </a>
        {{ end }}
      {{ end }}
    {{ end }}
  </div>

  <div class="abstract-collapse" id="abstract-{{ $item.File.UniqueID }}" style="display: none; margin-top: 1rem; padding: 1rem; background-color: #f5f5f5; border-radius: 4px; font-size: 0.9rem; color: rgb(76, 76, 76);">
    {{ $item.Params.abstract | markdownify }}
  </div>
</div>

<script>
function toggleAbstract(id) {
  var x = document.getElementById(id);
  x.style.display = x.style.display === 'none' ? 'block' : 'none';
}
</script>

<style>
.article-metadata {
  margin-right: 0.2rem;
}
.btn-outline-primary {
  border: 2px solid;
  border-radius: 6px;
  padding: 0.3rem 0.8rem;
  font-size: 0.9rem;
  font-weight: 500;
  background: none;
  transition: all 0.2s ease;
  cursor: pointer;
  text-decoration: none;
  display: inline-block;
}
.btn-outline-primary:hover {
  background-color: #81c784;
  color: white !important;
}
.btn-links {
  margin-top: 0.5rem;
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}
.article-title {
  font-weight: 500;
}
</style> 