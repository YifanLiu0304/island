<!-- Load Leaflet CSS and JS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

<style>
#travel-map {
    height: 600px;
    width: 100vw;
    position: relative;
    left: 50%;
    right: 50%;
    margin-left: -50vw;
    margin-right: -50vw;
    border-radius: 0;
    box-shadow: none;
    margin-bottom: 2em;
}
.city-popup {
    font-family: 'Inter', sans-serif;
    padding: 15px;
    max-width: 300px;
}
.city-popup h3 {
    margin: 0 0 10px 0;
    color: #2c3e50;
    font-size: 1.2em;
    border-bottom: 2px solid #1a8870;
    padding-bottom: 5px;
}
.city-popup .meta {
    font-size: 0.9em;
    color: #666;
    margin-bottom: 10px;
}
.city-popup .quick-info {
    background: #f8f9fa;
    padding: 8px;
    border-radius: 5px;
    margin: 10px 0;
    font-size: 0.9em;
}
.btn-explore {
    display: inline-block;
    padding: 8px 16px;
    background: #1a8870;
    color: white !important;
    text-decoration: none !important;
    border-radius: 5px;
    font-size: 0.9em;
    transition: all 0.3s ease;
    margin-top: 10px;
}
.btn-explore:hover, .btn-explore:visited, .btn-explore:active, .btn-explore:link {
    background: #146d59;
    color: white !important;
    text-decoration: none !important;
}
.city-filter {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    flex-wrap: wrap;
    justify-content: center;
    width: 100%;
}
.city-btn {
    padding: 8px 16px;
    border: 1px solid #1a8870;
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.9em;
}
.city-btn:hover, .city-btn.active {
    background: #1a8870;
    color: white;
}
</style>

<div class="city-filter">
    <button class="city-btn" data-city="all">All Cities</button>
    <!-- US Cities -->
    <button class="city-btn" data-city="boston">Boston</button>
    <button class="city-btn" data-city="new york">New York</button>
    <button class="city-btn" data-city="washington dc">Washington DC</button>
    <button class="city-btn" data-city="atlanta">Atlanta</button>
    <button class="city-btn" data-city="san francisco">San Francisco</button>
    <button class="city-btn" data-city="portland">Portland</button>
    <button class="city-btn" data-city="seattle">Seattle</button>
    <button class="city-btn" data-city="honolulu">Honolulu</button>
    <!-- Chinese Cities -->
    <button class="city-btn" data-city="beijing">Beijing</button>
    <button class="city-btn" data-city="shanghai">Shanghai</button>
    <button class="city-btn" data-city="hong kong">Hong Kong</button>
    <button class="city-btn" data-city="weihai">Weihai</button>
    <!-- European Cities -->
    <button class="city-btn" data-city="paris">Paris</button>
    <button class="city-btn" data-city="marseille">Marseille</button>
    <button class="city-btn" data-city="berlin">Berlin</button>
    <button class="city-btn" data-city="vienna">Vienna</button>
    <button class="city-btn" data-city="graz">Graz</button>
    <button class="city-btn" data-city="bucharest">Bucharest</button>
    <!-- South American Cities -->
    <button class="city-btn" data-city="lima">Lima</button>
</div>

<div id="travel-map"></div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize the map centered on the Atlantic
    var map = L.map('travel-map').setView([42.3601, -45.7538], 4);

    // Add a stylish tile layer
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        attribution: '©OpenStreetMap, ©CartoDB',
        maxZoom: 19
    }).addTo(map);

    // Define city information
    const cities = [
        {
            name: "Boston",
            coordinates: [42.3601, -71.0589],
            url: "../travel/boston",
            quickInfo: {
                highlights: "Freedom Trail, Harvard, Fenway"
            },
            description: "A city where colonial history meets cutting-edge innovation"
        },
        {
            name: "Atlanta",
            coordinates: [33.7490, -84.3880],
            url: "../travel/atlanta",
            quickInfo: {
                highlights: "Georgia Tech, Beltline, MLK Sites"
            },
            description: "The cultural and economic center of the American South"
        },
        {
            name: "Paris",
            coordinates: [48.8566, 2.3522],
            url: "../travel/paris",
            quickInfo: {
                highlights: "Louvre, Eiffel Tower, Le Marais"
            },
            description: "The City of Light, where every street tells a story"
        },
        {
            name: "Beijing",
            coordinates: [39.9042, 116.4074],
            url: "../travel/beijing",
            quickInfo: {
                highlights: "Great Wall, Forbidden City, Temple of Heaven"
            },
            description: "Ancient capital blending imperial history with modern China"
        },
        {
            name: "Shanghai",
            coordinates: [31.2304, 121.4737],
            url: "../travel/shanghai",
            quickInfo: {
                highlights: "The Bund, Yu Garden, Pudong Skyline"
            },
            description: "China's dynamic financial center and innovation hub"
        },
        {
            name: "Hong Kong",
            coordinates: [22.3193, 114.1694],
            url: "../travel/hong-kong",
            quickInfo: {
                highlights: "Victoria Peak, Harbor, Dim Sum"
            },
            description: "Where East meets West in a vibrant harbor city"
        },
        {
            name: "Weihai",
            coordinates: [37.5279, 122.0614],
            url: "../travel/weihai",
            quickInfo: {
                highlights: "Coastal Parks, Liugong Island, Seafood"
            },
            description: "Scenic coastal city with rich naval history"
        },
        {
            name: "New York",
            coordinates: [40.7128, -74.0060],
            url: "../travel/new-york",
            quickInfo: {
                highlights: "Central Park, Times Square, Museums"
            },
            description: "The city that never sleeps, global cultural capital"
        },
        {
            name: "Washington DC",
            coordinates: [38.9072, -77.0369],
            url: "../travel/washington-dc",
            quickInfo: {
                highlights: "National Mall, Smithsonian, Capitol"
            },
            description: "America's capital, rich in history and politics"
        },
        {
            name: "San Francisco",
            coordinates: [37.7749, -122.4194],
            url: "../travel/san-francisco",
            quickInfo: {
                highlights: "Golden Gate, Silicon Valley, Fisherman's Wharf"
            },
            description: "Tech hub with stunning bay views and diverse culture"
        },
        {
            name: "Portland",
            coordinates: [45.5155, -122.6789],
            url: "../travel/portland",
            quickInfo: {
                highlights: "Powell's Books, Food Trucks, Forest Park"
            },
            description: "Keep Portland Weird - eco-friendly and artistically vibrant"
        },
        {
            name: "Seattle",
            coordinates: [47.6062, -122.3321],
            url: "../travel/seattle",
            quickInfo: {
                highlights: "Space Needle, Pike Place, Coffee Culture"
            },
            description: "Emerald City where tech meets nature"
        },
        {
            name: "Lima",
            coordinates: [-12.0464, -77.0428],
            url: "../travel/lima",
            quickInfo: {
                highlights: "Historic Center, Gastronomy, Miraflores"
            },
            description: "Peru's capital, known for history and cuisine"
        },
        {
            name: "Honolulu",
            coordinates: [21.3069, -157.8583],
            url: "../travel/hawaii",
            quickInfo: {
                highlights: "Waikiki, Pearl Harbor, North Shore"
            },
            description: "Paradise in the Pacific with rich Polynesian culture"
        },
        {
            name: "Bucharest",
            coordinates: [44.4268, 26.1025],
            url: "../travel/bucharest",
            quickInfo: {
                highlights: "Parliament Palace, Old Town, Revolution Square"
            },
            description: "Romania's capital, mixing old world charm with modern energy"
        },
        {
            name: "Vienna",
            coordinates: [48.2082, 16.3738],
            url: "../travel/vienna",
            quickInfo: {
                highlights: "Schönbrunn Palace, Opera House, Cafes"
            },
            description: "City of music, art, and imperial grandeur"
        },
        {
            name: "Graz",
            coordinates: [47.0707, 15.4395],
            url: "../travel/graz",
            quickInfo: {
                highlights: "Schlossberg, Old Town, Modern Art"
            },
            description: "Austria's second city, UNESCO cultural heritage site"
        },
        {
            name: "Berlin",
            coordinates: [52.5200, 13.4050],
            url: "../travel/berlin",
            quickInfo: {
                highlights: "Brandenburg Gate, East Side Gallery, Museums"
            },
            description: "Germany's vibrant capital, rich in history and culture"
        },
        {
            name: "Marseille",
            coordinates: [43.2965, 5.3698],
            url: "../travel/marseille",
            quickInfo: {
                highlights: "Vieux-Port, Notre-Dame, Calanques"
            },
            description: "France's oldest city, Mediterranean gateway"
        }
    ];

    // Custom marker icon
    const customIcon = L.divIcon({
        className: 'custom-marker',
        html: '<span style="background-color: #1a8870; width: 12px; height: 12px; display: block; border-radius: 50%; border: 2px solid white; box-shadow: 0 0 4px rgba(0,0,0,0.3);"></span>',
        iconSize: [16, 16]
    });

    // Add markers with enhanced popups
    const markers = cities.map(city => {
        const marker = L.marker(city.coordinates, {icon: customIcon})
            .addTo(map)
            .bindPopup(`
                <div class="city-popup">
                    <h3>${city.name}</h3>
                    <div class="meta">${city.description}</div>
                    <div class="quick-info">
                        <strong>Highlights:</strong> ${city.quickInfo.highlights}
                    </div>
                    <a href="${city.url}" class="btn-explore" style="color: white !important; text-decoration: none !important;">Explore ${city.name}</a>
                </div>
            `);
        return {marker, city};
    });

    // City filter functionality
    document.querySelectorAll('.city-btn').forEach(button => {
        button.addEventListener('click', function() {
            const selectedCity = this.dataset.city;
            
            // Update button states
            document.querySelectorAll('.city-btn').forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');

            if (selectedCity === 'all') {
                markers.forEach(({marker}) => {
                    marker.addTo(map);
                });
                map.setView([42.3601, -45.7538], 4);
            } else {
                const cityData = cities.find(city => city.name.toLowerCase() === selectedCity);
                markers.forEach(({marker, city}) => {
                    if (city.name.toLowerCase() === selectedCity) {
                        marker.addTo(map);
                        map.setView(city.coordinates, 12);
                    } else {
                        map.removeLayer(marker);
                    }
                });
            }
        });
    });
});
</script> 