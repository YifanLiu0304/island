{{ define "main" }}

<div class="universal-wrapper">
  <h1>{{ .Title }}</h1>

  {{ with .Content }}
  <div class="article-style">{{ . }}</div>
  {{ end }}

  {{ $paginator := .Paginate .Pages }}
  {{ range $paginator.Pages }}
    <div class="pub-list-item view-citation" style="margin-bottom: 1rem">
      <i class="far fa-file-alt pub-icon" aria-hidden="true"></i>

      {{/* APA Style */}}
      <span class="article-metadata li-cite-author" style="color: rgb(76, 76, 76); font-size: 0.9rem;">
        {{ range $index, $value := .Params.authors }}
          {{- if eq $index 0 }}
            {{ $value | markdownify }}
          {{- else if eq $index (sub (len $.Params.authors) 1) }}
            , & {{ $value | markdownify }}
          {{- else }}
            , {{ $value | markdownify }}
          {{- end }}
        {{- end }}
      </span>
      <span style="color: rgb(76, 76, 76); font-size: 0.9rem;">({{ .Date.Format "2006" }}). </span>

      {{/* Title */}}
      {{ if .Params.doi }}
        <a href="https://doi.org/{{ .Params.doi }}" class="article-title" style="color: rgb(76, 76, 76); font-size: 0.9rem;">{{ .Title }}</a>.
      {{ else }}
        <span class="article-title" style="color: rgb(76, 76, 76); font-size: 0.9rem;">{{ .Title }}</span>.
      {{ end }}

      {{/* Publication */}}
      {{ with .Params.publication }}
        <span style="color: rgb(76, 76, 76); font-size: 0.9rem; font-style: italic;">{{ . | markdownify }}</span>
      {{ end }}

      <div class="button-container" style="margin-top: 0.5rem;">
        <button class="btn btn-outline-primary btn-sm" onclick="toggleAbstract('abstract-{{ .File.UniqueID }}')" style="border: 1px solid #81c784; color: #2e7d4f; border-radius: 4px; padding: 0.25rem 0.6rem; font-size: 0.8rem; margin-right: 0.5rem; background: none;">
          Abstract
        </button>
        <a class="btn btn-outline-primary btn-sm" href="mailto:liuyifan@gatech.edu" style="border: 1px solid #81c784; color: #2e7d4f; border-radius: 4px; padding: 0.25rem 0.6rem; font-size: 0.8rem; margin-right: 0.5rem; text-decoration: none; background: none;">
          Email me for details
        </a>
        {{ with .Params.doi }}
          <a class="btn btn-outline-primary btn-sm" href="https://doi.org/{{ . }}" target="_blank" style="border: 1px solid #81c784; color: #2e7d4f; border-radius: 4px; padding: 0.25rem 0.6rem; font-size: 0.8rem; text-decoration: none; background: none;">
            DOI
          </a>
        {{ end }}
      </div>

      <div class="abstract-block" id="abstract-{{ .File.UniqueID }}" style="display: none; margin-top: 1rem; padding: 0.8rem; background-color: #f8f9fa; border-radius: 4px; font-size: 0.9rem; color: rgb(76, 76, 76);">
        {{ .Params.abstract | markdownify }}
      </div>
    </div>
  {{ end }}

  {{ partial "pagination" . }}
</div>

<script>
function toggleAbstract(id) {
  var x = document.getElementById(id);
  x.style.display = x.style.display === 'none' ? 'block' : 'none';
}
</script>

<style>
.btn-outline-primary:hover {
  background-color: #81c784 !important;
  color: white !important;
}
.article-title {
  text-decoration: none;
}
.article-title:hover {
  color: #2e7d4f !important;
  text-decoration: underline;
}
.button-container {
  display: flex;
  flex-wrap: wrap;
  gap: 0.25rem;
}
</style>
{{ end }} 